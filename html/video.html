<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>摄像头测试</title>
    <style>
        video{
            width: 50%;
            height: 50%;
            margin: 50px auto;
            background-color: aquamarine;
            display: block;
        }
    </style>
    <script>
            //  philipwalton.com/articles/the-google-analytics-setup-i-use-on-every-site-i-build
            window.ga = window.ga || function() {
              (ga.q = ga.q || []).push(arguments);
            };
            ga('create', 'UA-33848682-1', 'auto');
            ga('set', 'transport', 'beacon');
            ga('send', 'pageview');
            </script>
            <script async src="https://www.google-analytics.com/analytics.js"></script>
            
            <meta charset="utf-8">
            <meta name="description" content="Simplest possible examples of HTML, CSS and JavaScript.">
            <meta name="author" content="//samdutton.com">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <meta itemprop="name" content="simpl.info: simplest possible examples of HTML, CSS and JavaScript">
            <meta itemprop="image" content="/images/icons/icon192.png">
            <meta id="theme-color" name="theme-color" content="#fff">
            
            <base target="_blank">
        </script> 
    <script>
        window.onload = init();
        function init(){
            var video = document.getElementById('video');
            if (navigator.mediaDevices.getUserMedia) {
                //最新的标准API
                navigator.mediaDevices.getUserMedia({video : {width: 1000, height: 1000}}).then(success).catch(error);
            } else if (navigator.webkitGetUserMedia) {
                //webkit核心浏览器
                navigator.webkitGetUserMedia({video : {width: 1000, height: 1000}},success, error)
            } else if (navigator.mozGetUserMedia) {
                //firfox浏览器
                navigator.mozGetUserMedia({video : {width: 1000, height: 1000}}, success, error);
            } else if (navigator.getUserMedia) {
                //旧版API
                navigator.getUserMedia({video : {width: 1000, height: 1000}}, success, error);
            }
        };
        
        function hasGetUserMedia() {
            return (navigator.mediaDevices &&
                navigator.mediaDevices.getUserMedia);
        }
        
        function success(stream) {
            //兼容webkit核心浏览器
            // let CompatibleURL = window.URL || window.webkitURL;
            //将视频流设置为video元素的源
            console.log(stream);
            //video.src = CompatibleURL.createObjectURL(stream);
            video.srcObject = stream;
            video.play();
        }
    
        function error(error) {
            console.log(`访问用户媒体设备失败${error.name}, ${error.message}`);
        }
    </script>
</head>
<body>

<video id="video" autoplay playsinline></video>

</body>
</html>